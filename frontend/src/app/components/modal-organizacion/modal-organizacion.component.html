<form
  [formGroup]="organizationForm"
  class="form-organizacion"
  enctype="multipart/form-data"
>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Ficha de Organización</h5>
      <p class="detail-text">
        Completa los datos, para que nuestros usuarios puedan conocerte<br />mejor
        y elegir donar.
      </p>
      <div class="mb-3" >
        <label for="organizacion" class="form-label required"
          >Organización</label
        >
        <input
          id="organizacion"
          type="text"
          class="form-control"
          formControlName="organizacion"
          maxlength="30"
          readonly
        />
        <!-- <small *ngIf="organizationForm.controls['organizacion'].dirty && organizationForm.hasError('required','organizacion')" class="text-danger">Nombre de Organizacion requerido</small> -->
        <div class="section-detail">
          <p class="info">
            Este es el nombre que aparecera en la portada de tu organización
          </p>
          <div class="form-text">
            {{ getCharacterCount("organizacion", 30) }}
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="descripcionBreve" class="form-label required"
          >Descripción Breve</label
        >
        <textarea
          id="descripcionBreve"
          class="form-control"
          formControlName="descripcionBreve"
          rows="3"
          maxlength="150"
        ></textarea>
        <small
          *ngIf="
            organizationForm.controls['descripcionBreve']?.dirty &&
            organizationForm.hasError('required', 'descripcionBreve')
          "
          class="text-danger"
          >Descripción breve requerida</small
        >

        <div class="section-detail">
          <p class="info">
            Breve descripción de tu organización. Los usuarios pordran<br />informarse
            sobre ella
          </p>
          <div class="form-text">
            {{ organizationForm.get("descripcionBreve")?.value.length }}/150
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="descripcionCompleta" class="form-label required"
          >Descripción Completa</label
        >
        <editor
        apiKey="ntlo9tszxpfohc7ddllnmtk84am6cbkm3sg6j37b7ow1dc1l"
        [init]="{
          height: 300,
          menubar: false,
          plugins: [
            'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',
            'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',
            'insertdatetime', 'media', 'table', 'help', 'wordcount'
          ],
          toolbar: 'undo redo | fontsize |' +
          'bold italic forecolor | alignleft aligncenter ' +
          'alignright alignjustify | bullist numlist outdent indent | ' +
          'removeformat | help',
        }"
        id="descripcionCompleta"
        class="form-control"
        formControlName="descripcionCompleta"
        rows="5"
        maxlength="4000"
      ></editor>
        <small
          *ngIf="
            organizationForm.controls['descripcionCompleta']?.dirty &&
            organizationForm.hasError('required', 'descripcionCompleta')
          "
          class="text-danger"
          >Descripción breve requerida</small
        >

        <div class="section-detail-complete">
          <div class="form-text">
            {{ organizationForm.get("descripcionCompleta")?.value.length }}/4000
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="imagen" class="form-label">Imagen</label>
        <p class="info">
          Cargá el logo de tu organización para promocionarla en ReCrea.<br />Revisa
          toda tu información antes de públicarla.
        </p>
        <div>
          <div *ngIf="imageSrc" class="mb-2">
            <img
              [src]="imageSrc"
              alt="Vista previa de la imagen"
              [style.width.px]="200"
            />
          </div>
          <input
            type="file"
            (change)="onFileSelected($event)"
            accept="image/*"
            formControlName="file"
          />
        </div>
        <small
          *ngIf="
            organizationForm.controls['imagen']?.dirty &&
            organizationForm.hasError('required', 'imagen')
          "
          class="text-danger"
          >Imagen Requerida</small
        >
      </div>

      <div class="section-btn">
        <button (click)="onSubmit()" type="submit"  class="btn btn-primary mt-3">
          Publicar
        </button>
      </div>
    </div>
  </div>
</form>
